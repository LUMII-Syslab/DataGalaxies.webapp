<script src="/tda.js"></script>
<script src="/jquery-1.11.1.min.js"></script>

<script src="/dropzone/lib/dropzone.js"></script>

Star name: <input type="edit" id="starName" value="Protein Data Bank"/>
<p>
Choose .pdb file:
<input id="finput" name="finput2" type="file" accept=".pdb" onchange='$("#selectedFileDiv").html(this.files[0].name+" chosen for upload")'/>
<br>
<div id="selectedFileDiv">
</div>


<script>

function load(star)
{

  star = tda.jsonsubmit("loadObjects", {
      navigationExpression : ".starData.*",
      objects : [star]
    }
  )[0];

  if (star.name)
    $("#starName").value = star.name;

  if (star.starData[0].fileName) {
    $("#selectedFileDiv").html(star.starData[0].fileName+" uploaded earlier");
  }
}

function store(star)
{
  star.name = document.getElementById("starName").value;
  if (!star.name)
    star.state = "CONFIGURATION_ERROR";

  if (document.getElementById("finput").files[0]) {
    // a new file has been chosen...

    // deleting previous file, if any
    if (star.starData[0].fileName) {
      tda.fileDelete(star.starData[0].fileName);  
      delete star.starData[0].fileName;
    }

    tda.fileUploadAsync(finput);
    star.starData[0].fileName = document.getElementById("finput").files[0].name;
  }
}

function finalize()
{
  alert("aaa");
}

</script>


